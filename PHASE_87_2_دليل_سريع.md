# Phase 87.2: ุชูุงูู Code Agent ูุน ุงูุฐูุงุก ุงูุงุตุทูุงุนู + ูุธุงู ุงูุทูุงุจูุฑ โ

**ุงูุญุงูุฉ**: ููุชูู
**ุงูุชุงุฑูุฎ**: 2025-11-27

---

## ููุฎุต ุณุฑูุน

Phase 87.2 ูุญููู Code Agent ูู skeleton ุจุณูุท ุฅูู ูุธุงู ูุงูู ูุณุชุฎุฏู OpenAI ูุชูููุฏ ุงูููุฏ ุชููุงุฆูุงู ูุน ูุธุงู ุทูุงุจูุฑ ุขูู.

---

## ุงูููููุงุช ุงูุฃุณุงุณูุฉ

### 1๏ธโฃ ุชูุงูู OpenAI

**ุงููููุงุช ุงูุฌุฏูุฏุฉ**:
- `src/lib/llm/callOpenAI.ts` - Wrapper ุจุณูุท ูู OpenAI API
- `src/lib/agent/prompts/codeAgentSystemPrompt.ts` - System prompt ุตุงุฑู (JSON ููุท)
- `src/lib/llm/extractJsonFromText.ts` - ุงุณุชุฎุฑุงุฌ JSON ูู ุงููุต
- `src/lib/llm/validateCodeAgentResponse.ts` - ุงูุชุญูู ูู ุงูุจููุฉ

**ุงูุฅุนุฏุงุฏุงุช**:
- Model: `gpt-4o-mini` (ุณุฑูุน ูุฑุฎูุต)
- Temperature: `0.2` (ููุฏ ูุชููุน)
- JSON mode: `enabled` (ูุถูู JSON ุตุญูุญ)

---

### 2๏ธโฃ ูุธุงู ุงูุทูุงุจูุฑ ุงูุขูู

#### **Endpoint ุฌุฏูุฏ**: `/api/f0/auto-execute-queue`

**ุงููุธููุฉ**:
1. ูุฎุชุงุฑ ุฃูู `queued_action` ูุนููุฉ ูู Firestore
2. ูููุฐูุง ุจุงุณุชุฎุฏุงู Code Agent
3. ูุญุฏูุซ ุญุงูุฉ ุงูุชุงุณู ูุงูู action
4. ูุถูู ุฑุณุงูุฉ ูู ุงูุดุงุช ุชูุถุญ ุงููู ุญุตู
5. ุงููุงุฌูุฉ ุชุชุญุฏูุซ ุชููุงุฆูุงู ุนุจุฑ Firestore listeners

**ุงูุงุณุชุฎุฏุงู**:
```bash
POST /api/f0/auto-execute-queue
Body: { projectId: "your-project-id" }
```

---

### 3๏ธโฃ ูุงุฌูุฉ ุงููุณุชุฎุฏู

#### **ุฒุฑ ุฌุฏูุฏ ูู ุตูุญุฉ Continue**

**ุงููููุน**: Header ุงูุตูุญุฉ (ุฃุนูู ุงููููู)
**ุงููุต**: "โก ุชูููุฐ ุงููููุฉ ุงูุชุงููุฉ" (ุนุฑุจู) ุฃู "Run next queued task" (ุฅูุฌููุฒู)
**ุงูููู**: ุฃุฎุถุฑ (ูููุฒ ุนู ุงูุฒุฑ ุงูุจููุณุฌู ููู Code Agent)

**ุงููุธุงุฆู**:
- Loading state: "โณ ุฌุงุฑู ุงูุชูููุฐ..."
- Error handling: ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ
- Real-time updates: ุงูู UI ูุชุญุฏูุซ ููุฑุงู

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1๏ธโฃ ุงูุชูููุฐ ุงููุฏูู (Task ูุญุฏุฏ)

```
1. ุฑูุญ ุตูุญุฉ Continue
   โ
2. ุงุฎุชุฑ Phase โ ุงุฎุชุฑ Task
   โ
3. ุงุถุบุท "๐ค Ask Agent to implement this task"
   โ
4. ุดูู ุงูููุฏ ูุชูููุฏ ูู ุงูุดุงุช ูุจุงุดุฑุฉ
   โ
5. ุงูู Patches ุชุชุฎุฒูู ูู Firestore
```

### 2๏ธโฃ ุงูุชูููุฐ ุงูุขูู (Queue)

```
1. ุฑูุญ ุตูุญุฉ Continue
   โ
2. ุงุถุบุท "โก ุชูููุฐ ุงููููุฉ ุงูุชุงููุฉ"
   โ
3. ุงููุธุงู ูุงุฎุฏ ุฃูู ูููุฉ ูุนููุฉ
   โ
4. ูููุฐูุง ุชููุงุฆูุงู
   โ
5. ุงูุชุญุฏูุซุงุช ุชุธูุฑ ููุฑุงู
```

---

## ุงูุฎูุงุตุฉ

Phase 87.2 ุญููู Code Agent ูู skeleton ูู ูุธุงู ูุงูู ุจู AI:

- ๐ค **AI ุญูููู**: GPT-4o-mini ููููุฏ ููุฏ ูุนูู
- ๐ **JSON ูุถููู**: Output ููุธูู ููุชููุน
- โก **ุทุงุจูุฑ ุขูู**: ุชูููุฐ ุงูููุงู ุจุถุบุทุฉ ูุงุญุฏุฉ
- ๐ **Real-time**: Firestore listeners ููุชุญุฏูุซุงุช ุงูููุฑูุฉ
- ๐ก๏ธ **Production Ready**: Error handling + Fallbacks + Logging

ุงููุธุงู ุฌุงูุฒ ููุชุฌุฑุจุฉ ูุงูุชูุงูู ูุน ุจุงูู ุงูููุตุฉ! ๐
